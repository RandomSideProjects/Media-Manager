<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Public Sources</title>
  <link rel="icon" href="../Assets/Favicon.png">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <button id="sourcesSettingsBtn" title="Settings" aria-label="Settings">⚙️</button>
  <div id="sourcesSettingsOverlay">
    <div id="sourcesSettingsPanel" role="dialog" aria-modal="true" aria-labelledby="sourcesSettingsTitle">
      <h3 id="sourcesSettingsTitle">Public Sources — Settings</h3>
      <div class="section">
        <div class="settings-row"><strong>Sort by</strong></div>
        <div class="settings-radio" id="sortOptions">
          <label><input type="radio" name="sort" value="az"> A–Z</label>
          <label><input type="radio" name="sort" value="za"> Z–A</label>
          <label><input type="radio" name="sort" value="newold"> New → Old</label>
          <label><input type="radio" name="sort" value="oldnew"> Old → New</label>
        </div>
      </div>
      <div class="section">
        <label class="settings-row" style="justify-content: space-between;">
          <span>Hide posters</span>
          <input type="checkbox" id="toggleHidePosters">
        </label>
      </div>
      <div class="section">
        <div class="settings-row" style="justify-content: space-between; width:100%;">
          <span>Row Limit</span>
          <div style="display:flex; align-items:center; gap:8px;">
            <input type="range" id="rowLimitRange" min="2" max="10" step="1" value="3">
            <span id="rowLimitValue">3</span>
          </div>
        </div>
      </div>
      <div class="section">
        <div class="settings-row"><strong>Library</strong></div>
        <div class="settings-radio" id="modeOptions">
          <label><input type="radio" name="mode" value="anime"> Anime</label>
          <label><input type="radio" name="mode" value="manga"> Manga</label>
        </div>
      </div>
      <div class="settings-actions">
        <button id="settingsCancel" class="btn-ghost">Close</button>
        <button id="settingsApply" class="btn-primary">Apply</button>
        <button id="openFeedback" class="btn-primary" style="margin-left:auto;">Feedback & Bugs</button>
      </div>
    </div>
  </div>
  <!-- Feedback overlay -->
  <div id="feedbackOverlay" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); align-items:center; justify-content:center; z-index:1002;">
    <div id="feedbackPanel" role="dialog" aria-modal="true" aria-labelledby="feedbackTitle" style="background:#1a1a1a; color:#f1f1f1; border:1px solid #333; border-radius:12px; width:480px; max-width:calc(100vw - 40px); padding:16px 18px; box-shadow:0 16px 40px rgba(0,0,0,0.6);">
      <h3 id="feedbackTitle" style="margin:0 0 10px 0;">Feedback & Bugs</h3>
      <div class="settings-row" style="flex-direction:column; align-items:stretch; gap:6px;">
        <label for="fbSubject">Subject (10 words max)</label>
        <input id="fbSubject" type="text" placeholder="Short subject" style="padding:.6em; border-radius:8px; border:1px solid #444; background:#2a2a2a; color:#f1f1f1;" />
      </div>
      <div class="settings-row" style="flex-direction:column; align-items:stretch; gap:6px; margin-top:8px;">
        <label for="fbMessage">Message (240 characters max)</label>
        <textarea id="fbMessage" maxlength="240" rows="5" placeholder="Describe the issue or feedback" style="padding:.6em; border-radius:8px; border:1px solid #444; background:#2a2a2a; color:#f1f1f1; resize:vertical;"></textarea>
        <div id="fbCount" style="font-size:.85em; opacity:.8; text-align:right;">0 / 240</div>
      </div>
      <div class="settings-actions" style="display:flex; gap:8px; justify-content:flex-end; margin-top:12px;">
        <button id="fbCancel" class="btn-ghost">Cancel</button>
        <button id="fbSend" class="btn-primary">Send</button>
      </div>
      <div id="fbStatus" style="margin-top:8px; font-size:.9em; min-height:1.2em; opacity:.9;"></div>
    </div>
  </div>
  <div class="container" id="sourcesContainer">
    <!-- Cards will be injected here -->
  </div>

  <script src="scripts/constants.js"></script>
  <script src="scripts/utils.js"></script>
  <script src="scripts/render.js"></script>
  <script src="scripts/ui-settings.js"></script>
  <script src="scripts/feedback.js"></script>
  <script src="scripts/loader.js"></script>
  <script src="scripts/temp-sources.js"></script>
</body>
</html>
