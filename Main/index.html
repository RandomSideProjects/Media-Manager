<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Media Manager</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <button id="themeToggle" title="Toggle Theme">☾</button>
  <button id="settingsBtn" title="Settings" style="position: fixed; top: 1rem; right: 4.5rem; width:2.5em; height:2.5em; border:none; border-radius:6px; background:var(--button-bg); color:var(--button-text); cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:1.2em; z-index:10000;">
    ⚙
  </button>
  <nav class="tabs">
  <div id="settingsOverlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); align-items:center; justify-content:center; z-index:10000;">
    <div id="settingsPanel" style="background:var(--container-bg); color:var(--text); border:1px solid #444; padding:1rem 1.25rem; border-radius:12px; min-width:300px; max-width:90%; box-shadow:0 20px 40px -10px rgba(0,0,0,0.6);">
      <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:0.75rem;">
        <h3 style="margin:0;">Settings</h3>
        <button id="settingsCloseBtn" style="background:var(--button-bg); color:var(--button-text); border:none; border-radius:6px; padding:0.3em 0.6em; cursor:pointer;">Close</button>
      </div>
      <div class="setting-row" style="display:flex; align-items:center; gap:0.5em; margin-bottom:0.5rem;">
        <input type="checkbox" id="clipToggle">
        <label for="clipToggle">Enable clipping</label>
      </div>
      <div class="setting-row" style="display:flex; align-items:center; gap:0.5em;">
        <input type="checkbox" id="clipPreviewToggle">
        <label for="clipPreviewToggle">Clip preview</label>
      </div>
    </div>
  </div>
    <button onclick="location.href='./index.html'" class="tab-button">Home</button>
    <div class="dropdown">
      <button class="tab-button dropbtn">Sources</button>
      <div class="dropdown-content">
        <button onclick="location.href='../Creator/index.html'" class="tab-button dropdown-item">Modify or Create</button>
        <button onclick="location.href='../Directorys/index.html'" class="tab-button dropdown-item">Public sources</button>
      </div>
    </div>
  </nav>
  <header>RSP Media Manager</header>
  <div class="container">
    <div id="urlInputContainer">
      <div id="errorMessage">Unfortunately, there was no directory given. Please try again or enter directory below.</div>
      <input type="text" id="urlInput" placeholder="https://example.com/list.json">
      <button id="goBtn">Go</button>
      <label for="folderInput" class="folder-button">Select Folder</label>
      <input type="file" id="folderInput" webkitdirectory multiple style="display:none">
    </div>
    <h2 id="directoryTitle"></h2>
    <div id="selectorScreen" style="display: none;">
      <div id="resumeMessage"></div>
      <h2>Select an Episode</h2>
      <div id="episodeList"></div>
      <button id="downloadBtn" style="padding:0.6em 1.2em; background:#007bff; color:#fff; border:none; border-radius:6px; cursor:pointer; text-transform:uppercase; letter-spacing:0.5px; margin-top:1em;">⤓ Download Source</button>
    </div>
    <div id="playerScreen" style="display: none;">
      <div id="loadingSpinner" class="spinner"></div>
      <button id="backBtn" style="display:none; margin-bottom: 1em;">≡</button>
      <button id="theaterBtn" title="Pop-out Player">⤴</button>
      <button id="clipBtn" style="margin-left:0.5em; padding:0.6em 1.2em; background:var(--button-bg); color:var(--button-text); border:none; border-radius:6px; cursor:pointer; text-transform:uppercase; letter-spacing:0.5px;">Clip</button>
      <h2 id="videoTitle">Loading...</h2>
      <video id="videoPlayer" controls></video>
      <button id="nextBtn">Next Item</button>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.0/jszip.min.js"></script>
  <script src="scripts/core.js"></script>
  <script src="scripts/extras.js"></script>
  <script src="scripts/settings.js"></script>
  <div id="clipOverlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); align-items:center; justify-content:center; z-index:10001; text-align:center;">
    <div id="clipOverlayContent" style="padding:1em; background:var(--container-bg); border-radius:8px; max-width:90%; margin:auto;">
      <p id="clipMessage" style="margin-bottom:1em; word-break:break-all; color:var(--text);"></p>
      <div id="clipButtonsRow" style="display:flex; gap:0.5em; justify-content:center;">
        <button id="clipDoneBtn" style="padding:0.6em 1.2em; background:var(--button-bg); color:var(--button-text); border:none; border-radius:6px; cursor:pointer; text-transform:uppercase; letter-spacing:0.5px;">Done</button>
        <button id="clipDownloadBtn" style="padding:0.6em 1.2em; background:var(--button-bg); color:var(--button-text); border:none; border-radius:6px; cursor:pointer; text-transform:uppercase; letter-spacing:0.5px;">Download</button>
      </div>
    </div>
  </div>
  <!-- Clip progress overlay -->
  <div id="clipProgressOverlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); align-items:center; justify-content:center; z-index:10002; text-align:center;">
    <div id="clipProgressContent" style="padding:1em; background:var(--container-bg); border-radius:8px; max-width:90%; margin:auto; color:var(--text);">
      <p id="clipProgressMessage" style="margin-bottom:1em;"></p>
      <progress id="clipProgressBar" max="100" value="0" style="width:100%;"></progress>
    </div>
  </div>
  <a href="https://github.com/RandomSideProjects" target="_blank" id="githubLink" style="
    position: fixed;
    bottom: 1rem;
    left: 1rem;
    background: var(--button-bg);
    color: var(--button-text);
    text-decoration: none;
    padding: 0.6em 1em;
    border-radius: 8px;
    display: flex;
    align-items: center;
    gap: 0.5em;
    font-size: 1rem;
    font-family: inherit;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    z-index: 10000;
  ">
    <span>RandomSideProjects</span>
    <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" style="height:1em; width:1em;">
  </a>
</body>
</html>
